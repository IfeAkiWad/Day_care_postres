{"ast":null,"code":"import axios from 'axios';\nexport const fetchAdmins = () => {\n  return dispatch => {\n    dispatch({\n      type: \"LOADING_ADMINS\"\n    });\n    fetch(\"http://localhost:3000/admins\").then(response => response.json()).then(data => {\n      dispatch({\n        type: \"LOGIN_ADMIN\",\n        admins: data\n      });\n    });\n  };\n}; // export const logInAdmin = () => {\n//   return (dispatch) => {\n//     dispatch({ type: \"LOGIN_ADMINS\" });\n//     fetch(\"http://localhost:3000/admins\")\n//       .then(response => response.json())\n//       .then((data) => {\n//         dispatch({ type: \"LOGIN_ADMINS\", admins: data });\n//       });\n//   }\n// }\n\nexport const loginAdmin = (data, handleSuccess) => {\n  return dispatch => {\n    return axios.post('http://localhost:3000/login', {\n      admin: data\n    }, {\n      withCredentials: true\n    }).then(response => {\n      if (response.data.status === 401) {\n        throw new Error(response.data.error);\n      }\n\n      dispatch({\n        type: 'LOGIN_ADMIN',\n        admin: response.data.admin.data.attributes\n      }); // dispatch({ type: 'CLEAR_ERROR' });\n\n      handleSuccess();\n    }); // .catch((response) =>\n    //   dispatch({ type: 'ADD_ERROR', error: response.message })\n    // );\n  };\n};","map":{"version":3,"sources":["/Users/ifeoluwaakinremi-wade/Day_care/frontend/src/actions/adminActions.js"],"names":["axios","fetchAdmins","dispatch","type","fetch","then","response","json","data","admins","loginAdmin","handleSuccess","post","admin","withCredentials","status","Error","error","attributes"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,OAAO,MAAMC,WAAW,GAAG,MAAM;AAC7B,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACAC,IAAAA,KAAK,CAAC,8BAAD,CAAL,CACGC,IADH,CACQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADpB,EAEGF,IAFH,CAESG,IAAD,IAAU;AACdN,MAAAA,QAAQ,CAAC;AAAEC,QAAAA,IAAI,EAAE,aAAR;AAAuBM,QAAAA,MAAM,EAAED;AAA/B,OAAD,CAAR;AACD,KAJH;AAKD,GAPD;AAQD,CATI,C,CAWL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,OAAO,MAAME,UAAU,GAAG,CAACF,IAAD,EAAOG,aAAP,KAAyB;AACjD,SAAQT,QAAD,IAAa;AAClB,WAAOF,KAAK,CAACY,IAAN,CACL,6BADK,EAEL;AAAEC,MAAAA,KAAK,EAAEL;AAAT,KAFK,EAGL;AAAEM,MAAAA,eAAe,EAAE;AAAnB,KAHK,EAKNT,IALM,CAKAC,QAAD,IAAc;AACpB,UAAIA,QAAQ,CAACE,IAAT,CAAcO,MAAd,KAAyB,GAA7B,EAAkC;AAC9B,cAAM,IAAIC,KAAJ,CAAUV,QAAQ,CAACE,IAAT,CAAcS,KAAxB,CAAN;AACH;;AACDf,MAAAA,QAAQ,CAAC;AAACC,QAAAA,IAAI,EAAE,aAAP;AAAsBU,QAAAA,KAAK,EAAEP,QAAQ,CAACE,IAAT,CAAcK,KAAd,CAAoBL,IAApB,CAAyBU;AAAtD,OAAD,CAAR,CAJoB,CAKlB;;AACAP,MAAAA,aAAa;AACd,KAZM,CAAP,CADkB,CAclB;AACA;AACA;AACD,GAjBD;AAoBD,CArBM","sourcesContent":["import axios from 'axios';\n\n\nexport const fetchAdmins = () => {\n    return (dispatch) => {\n      dispatch({ type: \"LOADING_ADMINS\" });\n      fetch(\"http://localhost:3000/admins\")\n        .then(response => response.json())\n        .then((data) => {\n          dispatch({ type: \"LOGIN_ADMIN\", admins: data });\n        });\n    };\n  };\n\n  // export const logInAdmin = () => {\n  //   return (dispatch) => {\n  //     dispatch({ type: \"LOGIN_ADMINS\" });\n  //     fetch(\"http://localhost:3000/admins\")\n  //       .then(response => response.json())\n  //       .then((data) => {\n  //         dispatch({ type: \"LOGIN_ADMINS\", admins: data });\n  //       });\n  //   }\n\n  // }\n\n  export const loginAdmin = (data, handleSuccess) => {\n    return (dispatch) =>{\n      return axios.post(\n        'http://localhost:3000/login',\n        { admin: data },\n        { withCredentials: true }\n      )\n      .then((response) => {\n      if (response.data.status === 401) {\n          throw new Error(response.data.error)\n      }\n      dispatch({type: 'LOGIN_ADMIN', admin: response.data.admin.data.attributes});\n        // dispatch({ type: 'CLEAR_ERROR' });\n        handleSuccess();\n      })\n      // .catch((response) =>\n      //   dispatch({ type: 'ADD_ERROR', error: response.message })\n      // );\n    }\n    \n    \n  };"]},"metadata":{},"sourceType":"module"}